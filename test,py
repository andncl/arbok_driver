import os
import numpy as np

from arbok_sequences.samples.aurora.measurements import (
    build_adiabatic_measurement)

AdiabaticMeasurement = build_adiabatic_measurement()

freq_range = np.arange(30e6, 80e6, 1e6, dtype = int)
print(len(freq_range))

AdiabaticMeasurement.AdiabaticSequence.print_readable_snapshot()

AdiabaticMeasurement.settables = [
    [AdiabaticMeasurement.AdiabaticSequence.IfQ1,
     AdiabaticMeasurement.AdiabaticSequence.IfQ2]
    
]
AdiabaticMeasurement.setpoints_grid = [
    [freq_range, freq_range]
]

AdiabaticMeasurement.gettables = [
    AdiabaticMeasurement.ParityRead.diff_set2_state
]

AdiabaticMeasurement.prepare_gettables()

opx_prog = AdiabaticMeasurement.get_program()

AdiabaticMeasurement.run(opx_prog)
